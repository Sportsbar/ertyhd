using EmployeePortal.API.Entities;
using EmployeePortal.API.Interfaces;
using Microsoft.AspNetCore.Mvc;

[ApiController]
[Route("api/employees")]
public class EmployeesController : ControllerBase
{
    private readonly IDapperService<Employee> _employeeRepository;
    private readonly IDapperService<ccms_employee> _ccmsemployeeRepository;

    public EmployeesController(IDapperService<Employee> employeeRepository, IDapperService<ccms_employee> ccmsemployeeRepository)
    {
        _employeeRepository = employeeRepository;
        _ccmsemployeeRepository = ccmsemployeeRepository;
    }



    [HttpGet("ccms")]
    public async Task<IEnumerable<ccms_employee>> GetCCMSEmployees()
    {
        return await _ccmsemployeeRepository.GetCCMSEmployees();
    }

    #region Testing
    [HttpGet]
    public async Task<IEnumerable<Employee>> GetAllEmployees()
    {
        return await _employeeRepository.GetEmployees();
    }
    
    [HttpGet("{id}")]
    public async Task<Employee> GetEmployeeById(int id)
    {
        return await _employeeRepository.GetByIdAsync(id);
    }

    [HttpGet("departments/{department}")]
    public async Task<IEnumerable<Employee>> GetEmployeesByDepartment(string department)
    {
        return await _employeeRepository.GetEmployeesByDepartment(department);
    }

    #endregion


}
